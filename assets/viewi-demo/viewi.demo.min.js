(()=>{var te=class{id=0;name=null;child=null};var ne=class{id=null;name=null};var fe=class{request(t,n){var o=this,r=t.withHeader("X-Test-ID","mytoken");n.next(r)}response(t,n){var o=this,r=t.withBody("Access denied").withStatus(400);n.next(r)}};var L={componentsPath:"/assets/viewi-demo/viewi.demo.json",publicPath:"/assets/viewi-demo/",name:"demo",minify:!1,combine:!1,appendVersion:!1,build:"I6mUEKDi",version:"2.0.0"};var A=window.ViewiApp?window.ViewiApp[L.name].register:{};var Rn=A.HttpClient,pe=class{CSRFToken=null;http=null;constructor(t){var n=this;n.http=t}request(t,n){var o=this;o.CSRFToken===null?o.http.post("/api/session").then(function(r){o.CSRFToken=r.CSRFToken,o.handleRequest(t,n)},function(){n.reject(t)}):o.handleRequest(t,n)}handleRequest(t,n){var o=this,r=t.withHeader("X-CSRF-TOKEN",o.CSRFToken);n.next(r)}response(t,n){var o=this;t.status===0?(t.status=200,t.body=new te,t.body.id=0,t.body.name="Mockup Post due to rejected request"):t.body.id+=1e3,n.next(t)}};var de=class{run(t){var n=this;t.next()}};var oe=class{subscriber=null;notifyCallback=null;constructor(t,n){var o=this;o.subscriber=t,o.notifyCallback=n}unsubscribe(){var t=this;t.subscriber.unsubscribe(t)}};function he(e,t,n){let o=!!n,r="";if(typeof e=="object"&&e.exec){if(!o){let i="i"+(e.global?"g":"")+(e.multiline?"m":"")+(e.sticky?"y":"");e=new RegExp(e.source,i)}for(r in t)if(t.hasOwnProperty(r)&&e.test(t[r]))return r;return!1}for(r in t)if(t.hasOwnProperty(r)&&(o&&t[r]===e||!o&&t[r]==e))return r;return!1}function Ct(e){return e===+e&&isFinite(e)&&!(e%1)}function ge(e,t,n,o){var r=function(i,c,u){if(i[c]!==void 0){let a=c;c+=1,c===u&&(c+=1),c=r(i,c,u),i[c]=i[a],delete i[a]}return c};if(o&&typeof o!="object"&&(o=[o]),n===void 0?n=t>=0?e.length-t:-t:n<0&&(n=(t>=0?e.length-t:-t)+n),Object.prototype.toString.call(e)!=="[object Array]"){let i=0,c=-1,u=[],a={},l=-1,s=-1,m=!0,b=0,g="";for(g in e)i+=1;t=t>=0?t:i+t;for(g in e){if(c+=1,c<t){if(isInt(g)){if(s+=1,parseInt(g,10)===s)continue;r(e,s,g),e[s]=e[g],delete e[g]}continue}m&&isInt(g)?(u.push(e[g]),a[b++]=e[g]):(a[g]=e[g],m=!1),o&&o[++l]?e[g]=o[l]:delete e[g]}return m?u:a}return o?(o.unshift(t,n),Array.prototype.splice.apply(e,o)):e.splice(t,n)}var re=class{dataState=null;subscribers=[];constructor(t){var n=this;t=typeof t<"u"?t:null,t!==null&&(n.dataState={data:t})}subscribe(t){var n=this,o=new oe(n,t);return n.subscribers.push(o),o.notifyCallback(n.dataState?n.dataState.data:null),o}unsubscribe(t){var n=this,o=he(t,n.subscribers);o!==!1&&ge(n.subscribers,o,1)}notify(){var t=this;for(var n in t.subscribers){var o=t.subscribers[n];o.notifyCallback(t.dataState?t.dataState.data:null)}}reset(){var t=this;t.dataState=null,t.notify()}publish(t){var n=this;n.dataState={data:t},n.notify()}};var eo=A.Platform,ye=class{urlUpdateSubscriber=null;platform=null;constructor(t){var n=this;n.platform=t,n.urlUpdateSubscriber=new re(n.platform.getCurrentUrlPath()),n.platform.onUrlUpdate(function(){n.urlUpdateSubscriber.publish(n.platform.getCurrentUrlPath())})}navigateBack(){var t=this;t.platform.navigateBack()}navigate(t){var n=this;n.platform.redirect(t)}getUrl(){var t=this;return t.platform.getCurrentUrl()}getUrlPath(){var t=this;return t.platform.getCurrentUrlPath()}getQueryParams(){var t=this;return t.platform.getQueryParams()}urlWatcher(){var t=this;return t.urlUpdateSubscriber}};var be=class{route=null;constructor(t){var n=this;n.route=t}run(t){var n=this;t.next(!1),n.route.navigate("/")}};var xe=class{count=0;increment(){var t=this;t.count++}decrement(){var t=this;t.count--}};var ve=class{items=[];addNewItem(t){var n=this;n.items=[...n.items,t]}};var y=class{__id="";_props={};$_callbacks={};_refs={};_slots={};_element=null;$$t=[];$$r={};$$p=[];$;_name="BaseComponent";emitEvent(t,n){t in this.$_callbacks&&this.$_callbacks[t](n)}};var Ce=class extends y{_name="DemoContainer"};function K(e){let t=typeof window<"u"?window:global;t.$locutus=t.$locutus||{};let n=t.$locutus;n.php=n.php||{};let o=t.JSON,r;try{if(typeof o=="object"&&typeof o.stringify=="function"){if(r=o.stringify(e),r===void 0)throw new SyntaxError("json_encode");return r}let c=e,u=function(a){let l=["\0-","\x7F-\x9F","\xAD","\u0600-\u0604","\u070F","\u17B4","\u17B5","\u200C-\u200F","\u2028-\u202F","\u2060-\u206F","\uFEFF","\uFFF0-\uFFFF"].join(""),s=new RegExp('[\\"'+l+"]","g"),m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return s.lastIndex=0,s.test(a)?'"'+a.replace(s,function(b){let g=m[b];return typeof g=="string"?g:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'};var i=function(a,l){let s="",m="    ",b=0,g="",T="",f=0,d=s,h=[],p=l[a];switch(p&&typeof p=="object"&&typeof p.toJSON=="function"&&(p=p.toJSON(a)),typeof p){case"string":return u(p);case"number":return isFinite(p)?String(p):"null";case"boolean":return String(p);case"object":if(!p)return"null";if(s+=m,h=[],Object.prototype.toString.apply(p)==="[object Array]"){for(f=p.length,b=0;b<f;b+=1)h[b]=i(b,p)||"null";return T=h.length===0?"[]":s?`[
`+s+h.join(`,
`+s)+`
`+d+"]":"["+h.join(",")+"]",T}for(g in p)Object.hasOwnProperty.call(p,g)&&(T=i(g,p),T&&h.push(u(g)+(s?": ":":")+T));return T=h.length===0?"{}":s?`{
`+s+h.join(`,
`+s)+`
`+d+"}":"{"+h.join(",")+"}",T;case"undefined":case"function":default:throw new SyntaxError("json_encode")}};return i("",{"":c})}catch(c){if(!(c instanceof SyntaxError))throw new Error("Unexpected error type in json_encode()");return n.php.last_error_json=4,null}}var ke=class extends y{_name="ViewiIcon"};var Te=class extends y{_name="MenuBar";route=null;constructor(t){super();var n=this;n.route=t}goHome(){var t=this;t.route.navigate("/")}back(){var t=this;t.route.navigateBack()}getCurrentUrl(){var t=this;return t.route.getUrlPath()}getQueryParams(){var t=this;return t.route.getQueryParams()}},kt=[function(e){return function(t){e.goHome(t)}},function(e){return function(t){e.back(t)}},function(e){return`
                Url: `+(e.getCurrentUrl()??"")+`
            `},function(e){return`
                Url: `+(K(e.getQueryParams())??"")+`
            `}];function z(e){var t=e+"";return t.length}var we=class extends y{_name="Counter";count=0;message="My message";increment(){var t=this;t.count++,t.message+="!"}decrement(){var t=this;t.count--}},Tt=[function(e){return function(t){e.decrement()}},function(e){return e.count%10+12},function(e){return`
    Count `+(e.count??"")+" "+(z(e.message)??"")+`
`},function(e){return`
Count `+(e.count??"")+" strlen:"+(z(e.message)??"")+`
`},function(e){return function(t){e.count++}},function(e){return function(t){e.increment()}},function(e){return function(t){e.increment(t)}},function(e){return function(t){e.increment(t)}},function(e){return e.message}];var No=A.Platform,_e=class{config=null;platform=null;constructor(t){var n=this;n.platform=t,n.config=t.getConfig()}getAll(){var t=this;return t.config}get(t){var n=this;return n.config[t]??null}isServer(){var t=this;return t.platform.server}isBrowser(){var t=this;return t.platform.browser}};function Ne(e,t){let n="",o="",r="";if(arguments.length===1&&(t=e,e=""),typeof t=="object"){if(Object.prototype.toString.call(t)==="[object Array]")return t.join(e);for(n in t)o+=r+t[n],r=e;return o}return t}var Po=A.HttpClient,Se=class extends y{_name="CssBundle";config=null;http=null;constructor(t,n){super();var o=this;t=typeof t<"u"?t:null,n=typeof n<"u"?n:null,o.config=t,o.http=n}links=[];minify=!1;combine=!1;inline=!1;purge=!1;cssHtml="<!--- CssBundle not initiated --->";mounted(){var t=this,n=t.config.get("assetsUrl");if(t.combine){var o=t.config.get("cssBundle"),r=t.version();if(!(r in o))throw new Exception("Css bundle not found");var i=n+o[r];if(t.inline){t.cssHtml='<style data-keep="'+r+'"> /** loading '+i+" **/ </style>",t.http.get(i).then(function(l){t.cssHtml='<style data-keep="'+r+'">'+l+"</style>"},function(){t.cssHtml='<style data-keep="'+r+'"> /** Error loading '+i+" **/ </style>"});return}t.cssHtml='<link rel="stylesheet" href="'+i+'">'}else{var c="";for(var u in t.links){var a=t.links[u];i=n+a,c+='<link rel="stylesheet" href="'+i+'">',t.cssHtml=c}}}version(){var t=this,n=Ne("|",t.links);return n+=t.minify?"1":"0",n+=t.inline?"1":"0",n+=t.purge?"1":"0",n+=t.combine?"1":"0",n}},wt=[function(e){return e.cssHtml}];var Ae=class extends y{_name="ViewiAssets";appPath="";data='<script data-keep="ViewiAssets">"ViewiAssets";<\/script>'},_t=[function(e){return e.data},function(e){return e.appPath}];var zo=A.Portal,$e=class extends y{_name="Layout";title="Viewi";assetsUrl="/";constructor(t){super();var n=this;n.assetsUrl=t.get("assetsUrl")}},Nt=[function(e){return`
        `+(e.title??"")+` | Viewi
    `},function(e){return["/mui.css","/app.css"]},function(e){return e.title}];var or=A.HttpClient,Ie=class extends y{_name="ExternalHttpPage";title="External Http support";error="";message="";users=null;data=[];http=null;constructor(t){super();var n=this;n.http=t}init(){var t=this;t.message="Loading..",t.http.post("/api/movies").then(function(n){t.data=n},function(){},function(){})}},St=[function(e){return K(e.data)},function(e){return e.data},function(e,t,n){return n.name},function(e){return"Message: "+(e.message??"")},function(e){return"Error: "+(e.error??"")},function(e){return e.users},function(e){return e.users},function(e,t,n){return n.user_id},function(e,t,n){return n.name},function(e,t,n){return n.email},function(e,t,n){return n.age},function(e,t,n){return n.date_created}];var Be=class extends y{_name="PanelLayout";title="Viewi";timerId=0;seconds=0;init(){var t=this;t.seconds=500,this.timerId=setInterval(()=>t.tick(),1e3)}destroy(){var t=this;clearInterval(this.timerId)}tick(){var t=this;t.seconds++,console.log("PanelLayout time "+t.seconds)}},At=[function(e){return e.seconds},function(e){return e.title},function(e){return"Panel: "+(e.seconds??"")+" "+(e.title??"")}];var Ee=class extends y{_name="HomePage";title="Viewi v2 - Build reactive front-end with PHP";timerId=0;seconds=0;init(){var t=this;t.seconds=100,this.timerId=setInterval(()=>t.tick(),1e3)}destroy(){var t=this;clearInterval(this.timerId)}tick(){var t=this;t.seconds++,console.log("HomePage time "+t.seconds)}},$t=[function(e){return e.title},function(e){return e.title},function(e){return"Seconds: "+(e.seconds??"")}];var Me=class extends y{_name="AreaLayout";title="Area Layout"},It=[function(e){return`
        `+(e.title??"")+` | Area
    `}];var Pe=class extends y{_name="NotFoundPage"};var He=class extends y{_name="StatefulCounter";counter=null;count=null;constructor(t,n){super();var o=this;n=typeof n<"u"?n:0,o.counter=t,o.count=n,o.counter.count+=100}},Bt=[function(e){return function(t){e.counter.decrement()}},function(e){return e.__id},function(e){return e.counter.count},function(e){return function(t){e.counter.increment()}}];var Le=class extends y{_name="CounterPage"};var Re=class extends y{_name="MemberPage"};var De=class extends y{_name="MemberPageNoAccess"};var oi=A.HttpClient,Ve=class extends y{_name="PostPage";post=null;error="";message="";http=null;id=null;constructor(t,n){super();var o=this;o.http=t,o.id=n}init(){var t=this;t.http.withInterceptor("SessionInterceptor").get("/api/post/"+t.id).then(function(n){t.post=n,t.message="Post has been read successfully"},function(){t.error="Server error"})}},Et=[function(e){return e.post?e.post.name:""},function(e){return"Message: "+(e.message??"")},function(e){return"Error: "+(e.error??"")},function(e){return e.post},function(e){return`
            `+(e.post.id??"")+" "+(e.post.name??"")+`
        `}];var Ue=class extends y{_name="TestLayoutPage"};function Y(e,t){let n,o=0;if(e===null||typeof e>"u")return 0;if(e.constructor!==Array&&e.constructor!==Object)return 1;t==="COUNT_RECURSIVE"&&(t=1),t!==1&&(t=0);for(n in e)e.hasOwnProperty(n)&&(o++,t===1&&e[n]&&(e[n].constructor===Array||e[n].constructor===Object)&&(o+=Y(e[n],1)));return o}var je=class extends y{_name="TodoList";items=null},Mt=[function(e){return e.items},function(e,t,n){return n}];var Oe=class extends y{_name="TodoApp";text="";items=[];handleSubmit(t){var n=this;t.preventDefault(),z(n.text)!=0&&(n.items=[...n.items,n.text],n.text="")}},Pt=[function(e){return function(t){e.handleSubmit(t)}},function(e){return[function(t){return t.text},function(t,n){t.text=n}]},function(e){return`
        Add #`+(Y(e.items)+1)+`
    `},function(e){return e.items}];var Fe=class extends y{_name="TestInput";id=null;model=null;onInput(t){var n=this;n.emitEvent("model",t.target.value)}},Ht=[function(e){return function(t){e.onInput(t)}},function(e){return[function(t){return t.model},function(t,n){t.model=n}]}];var qe=class extends y{_name="TestButton";id=null;title=null;class=null;disabled=!1;loading=!1;onClick(t){var n=this;n.emitEvent("click",t)}},Lt=[function(e){return e.id},function(e){return e.disabled},function(e){return e.title},function(e){return e.class},function(e){return function(t){e.onClick(t)}},function(e){return" "+(e.title??"")+`
    `},function(e){return e.loading}];var Ke=class extends y{_name="ItemComponent"};var Je=class extends y{_name="SomeComponent"};var Ge=class extends y{_name="TestComponent";name="MyName";name2="";_name2_Test="MyName_2";empty="";null=null;url="/home";attr="title";event="(click)";arr=["a","b","c"];arrWithKeys={a:"Apple",b:"Orange",c:"Lemon"};arrNested={a:{a:"Apple",b:"Orange",c:"Lemon"},b:{a:"Apple",b:"Orange",c:"Lemon"},c:{a:"Apple",b:"Orange",c:"Lemon"}};movies=[];ifValue=!0;ifElseValue=!0;nestedIf=!0;dynamic="div";dynamic2="ItemComponent";raw="<b><i>Raw html text</i></b>";isDisabled=!0;message="Some message";checked=!1;checked2=!0;checkedNames=[];picked="One";selected="";selectedList=["A","C"];user=null;NameInput=null;testModel="some test";orderTest=[];counterReducer=null;constructor(t){super();var n=this;n.counterReducer=t,n.user=new ne,n.user.id=1,n.user.name="Miki the cat",n.counterReducer.increment()}getNames(){var t=this;return K(t.checkedNames)}updateMovies(){var t=this;t.movies=[{id:1,name:"Inception",year:2010},{id:2,name:"Interstellar",year:2014},{id:3,name:"Dunkirk",year:2017}],t.orderTest=["1","2","3"]}updateMovies2(){var t=this;t.movies=[{id:3,name:"Dunkirk",year:2017},{id:2,name:"Interstellar",year:2014}],t.orderTest=["3","2","4","1"]}getName(t){var n=this;t=typeof t<"u"?t:null;var o=(1+5)*10;return t??"DefaultName"}addTodo(){var t=this;t.arrNested={a:{a:"Apple",b:"Orange",c:"Lemon"},d:{R:"Rat",T:"Dog",G:"Cat"},b:{a:"Apple",b:"Orange",c:"Lemon"}}}onEvent(t){var n=this;t.preventDefault()}toggleIf(){var t=this;t.ifValue=!t.ifValue,t.arr=t.ifValue?["a","b","c"]:["x","b","r"]}toggleElseIf(){var t=this;t.ifElseValue=!t.ifElseValue}},Rt=[function(e){return"Tag test "+(e.name??"")+" "+(e.name2??"")+" "+(e._name2_Test??"")},function(e){return`
    $notAVar `+(e.getName()??"")+" "+(e.getName(e.name)??"")+`
    Nested
    `},function(e){return e.url},function(e){return e.empty},function(e){return e.null},function(e){return e.attr},function(e){return function(t){expression(t)}},function(e){return e.event},function(e){return function(t){e.onEvent(t)}},function(e){return function(t){e.updateMovies(t)}},function(e){return function(t){e.updateMovies2(t)}},function(e){return K(e.movies)},function(e){return e.movies},function(e,t,n){return t+" "+(n.name??"")},function(e){return e.orderTest},function(e,t,n){return n},function(e){return[function(t){return t.testModel},function(t,n){t.testModel=n}]},function(e){return e.testModel},function(e){return[function(t){return t.testModel},function(t,n){t.testModel=n}]},function(e){return function(){e.counterReducer.increment()}},function(e){return"Clicked "+(e.counterReducer.count??"")+`
`},function(e){return function(){e.counterReducer.increment()}},function(e){return"Clicked "+(e.counterReducer.count??"")},function(e){return function(t){e.counterReducer.increment(t)}},function(e){return"Clicked "+(e.counterReducer.count??"")},function(e){return e.__id},function(e){return"First Name ("+(e.__id??"")+")"},function(e){return e.__id},function(e){return function(t){e.counterReducer.increment()}},function(e){return"Clicked "+(e.counterReducer.count??"")},function(e){return function(t){e.nestedIf=!e.nestedIf}},function(e){return e.nestedIf},function(e){return[function(t){return t.user.name},function(t,n){t.user.name=n}]},function(e){return e.user.name},function(e){return e.name},function(e){return"Custom "+(e.name??"")},function(e){return[function(t){return t.name},function(t,n){t.name=n}]},function(e){return[function(t){return t.name},function(t,n){t.name=n}]},function(e){return`
    `+(e.name??"")+`
`},function(e){return[function(t){return t.name2},function(t,n){t.name2=n}]},function(e){return`
    `+(e.name2??"")+`
`},function(e){return[function(t){return t.message},function(t,n){t.message=n}]},function(e){return e.message},function(e){return[function(t){return t.checked},function(t,n){t.checked=n}]},function(e){return e.checked},function(e){return[function(t){return t.checked2},function(t,n){t.checked2=n}]},function(e){return e.checked2},function(e){return[function(t){return t.checkedNames},function(t,n){t.checkedNames=n}]},function(e){return[function(t){return t.checkedNames},function(t,n){t.checkedNames=n}]},function(e){return[function(t){return t.checkedNames},function(t,n){t.checkedNames=n}]},function(e){return"Checked names: "+(e.getNames()??"")},function(e){return[function(t){return t.picked},function(t,n){t.picked=n}]},function(e){return[function(t){return t.picked},function(t,n){t.picked=n}]},function(e){return"Picked: "+(e.picked??"")},function(e){return[function(t){return t.selected},function(t,n){t.selected=n}]},function(e){return"Selected: "+(e.selected??"")},function(e){return[function(t){return t.selectedList},function(t,n){t.selectedList=n}]},function(e){return[function(t){return t.selectedList},function(t,n){t.selectedList=n}]},function(e){return"Selected: "+(K(e.selectedList)??"")},function(e){return e.isDisabled},function(e){return!e.isDisabled},function(e){return e.isDisabled?" mui-btn":""},function(e){return e.isDisabled?" mui-btn--primary":""},function(e){return e.isDisabled?"":" mui-btn--accent"},function(e){return function(t){e.isDisabled=!e.isDisabled}},function(e){return function(t){e.isDisabled=!e.isDisabled}},function(e){return e.raw},function(e){return e.raw},function(e){return function(t){e.raw=e.raw[0]==="<"?"New RAW: <span><i>Another content</i></span>":"<b><i>Raw html text</i></b>"}},function(e){return e.nestedIf},function(e){return e.name},function(e){return"Custom "+(e.name??"")},function(e){return e.nestedIf},function(e){return{id:"myid",title:"Custom "+e.name,class:"mui-btn--accent"}},function(e){return`
    Custom `+(e.name??"")+`
`},function(e){return function(t){e.name="Viewi Junior"}},function(e){return function(t){e.nestedIf=!e.nestedIf}},function(e){return e.nestedIf},function(e){return"Custom "+(e.name??"")+" Slot"},function(e){return e.nestedIf},function(e){return e.arrNested},function(e,t,n){return`
    Custom `+(e.name??"")+` Slot
    `},function(e,t,n){return n},function(e,t,n,o,r){return t},function(e,t,n,o,r){return o},function(e,t,n,o,r){return r},function(e,t,n,o,r){return t+". "+(o??"")+". "+(r??"")},function(e,t,n){return e.nestedIf},function(e,t,n){return e.name},function(e){return function(t){e.nestedIf=!e.nestedIf}},function(e){return function(t){e.dynamic=e.dynamic==="div"?"ItemComponent":"div"}},function(e){return`
`+(e.dynamic??"")+" "+(e.dynamic2??"")+`
`},function(e){return e.dynamic},function(e){return"Tag or component "+(e.dynamic??"")+" "+(e.dynamic2??"")},function(e){return e.dynamic2},function(e){return"Tag or component "+(e.dynamic??"")+" "+(e.dynamic2??"")},function(e){return"Custom "+(e.name??"")+" Slot"},function(e){return"Custom "+(e.name??"")+` slot
        `},function(e){return"Custom header "+(e.name??"")+" inside div"},function(e){return"Custom "+(e.name??"")+" footer"},function(e){return function(t){e.addTodo(t)}},function(e){return e.nestedIf},function(e){return e.name},function(e){return e.ifValue},function(e){return e.arrNested},function(e,t,n){return n},function(e,t,n,o,r){return t+". "+(o??"")+". "+(r??"")},function(e){return e.arr},function(e,t,n){return e.ifElseValue},function(e,t,n){return n},function(e,t,n){return n},function(e,t,n){return n},function(e,t,n){return e.nestedIf},function(e,t,n){return e.name},function(e){return e.arr},function(e,t,n){return t},function(e,t,n){return n},function(e,t,n){return t+". "},function(e,t,n){return n},function(e,t,n){return n},function(e){return e.arrWithKeys},function(e,t,n){return t},function(e,t,n){return n},function(e,t,n){return t+": "},function(e,t,n){return t},function(e,t,n){return n},function(e,t,n){return n},function(e){return e.ifValue},function(e){return e.arrNested},function(e,t,n){return n},function(e,t,n,o,r){return t},function(e,t,n,o,r){return o},function(e,t,n,o,r){return r},function(e,t,n,o,r){return t+". "+(o??"")+". "+(r??"")},function(e){return e.arrNested},function(e,t,n){return t==="b"},function(e,t,n){return n},function(e,t,n,o,r){return t},function(e,t,n,o,r){return o},function(e,t,n,o,r){return r},function(e,t,n,o,r){return t+". "+(o??"")+". "+(r??"")},function(e){return function(t){e.toggleIf(t)}},function(e){return function(t){e.toggleElseIf(t)}},function(e){return function(t){e.nestedIf=!e.nestedIf}},function(e){return function(t){e.name="Viewi Junior"}},function(e){return e.ifValue},function(e){return e.ifElseValue},function(e){return e.ifValue},function(e){return e.ifElseValue},function(e){return e.arr},function(e,t,n){return n}];var es=A.Platform,Qe=class extends y{_name="TestPage";baseUrl="";platform=null;config=null;constructor(t,n){super();var o=this;o.platform=t,o.config=n,o.baseUrl=n.get("baseUrl")}getEnvironment(){var t=this;return t.platform.browser?"Browser":"Server"}},Dt=[function(e){return"Config base url: "+(e.baseUrl??"")},function(e){return"Env: "+(e.getEnvironment()??"")}];var We=class extends y{_name="StatefulTodoApp";text="";todo=null;constructor(t){super();var n=this;n.todo=t}handleSubmit(t){var n=this;t.preventDefault(),z(n.text)!=0&&(n.todo.addNewItem(n.text),n.text="")}},Vt=[function(e){return function(t){e.handleSubmit(t)}},function(e){return[function(t){return t.text},function(t,n){t.text=n}]},function(e){return`
        Add #`+(Y(e.todo.items)+1)+`
    `},function(e){return e.todo.items}];var ze=class extends y{_name="TodoAppPage"};var ks=A.Portal,Xe=class extends y{_name="PortalPage";title="Portal demo"},Ut=[function(e){return e.title},function(e){return e.title},function(e){return[function(t){return t.title},function(t,n){t.title=n}]},function(e){return`
            This should appear at the end of the body (portal with name "body").
            Title of the page: `+(e.title??"")+`
        `},function(e){return`
            This should appear at the begining of the body (portal with name "header").
            Title of the page: `+(e.title??"")+`
        `},function(e){return`
            Body: `+(e.title??"")+`
        `},function(e){return`
            Header: `+(e.title??"")+`
        `}];var U={PostModel:te,UserModel:ne,ExampleInterceptor:fe,SessionInterceptor:pe,MemberGuard:de,MemberGuardNoAccess:be,CounterReducer:xe,TodoReducer:ve,DemoContainer:Ce,MenuBar_x:kt,MenuBar:Te,ViewiIcon:ke,Counter_x:Tt,Counter:we,ExternalHttpPage_x:St,ExternalHttpPage:Ie,HomePage_x:$t,HomePage:Ee,AreaLayout_x:It,AreaLayout:Me,Layout_x:Nt,Layout:$e,PanelLayout_x:At,PanelLayout:Be,NotFoundPage:Pe,CounterPage:Le,MemberPage:Re,MemberPageNoAccess:De,PostPage_x:Et,PostPage:Ve,TestLayoutPage:Ue,TestPage_x:Dt,TestPage:Qe,TodoAppPage:ze,PortalPage_x:Ut,PortalPage:Xe,StatefulCounter_x:Bt,StatefulCounter:He,StatefulTodoApp_x:Vt,StatefulTodoApp:We,ItemComponent:Ke,SomeComponent:Je,TestButton_x:Lt,TestButton:qe,TestComponent_x:Rt,TestComponent:Ge,TestInput_x:Ht,TestInput:Fe,TodoApp_x:Pt,TodoApp:Oe,TodoList_x:Mt,TodoList:je,CssBundle_x:wt,CssBundle:Se,ViewiAssets_x:_t,ViewiAssets:Ae,Subscriber:re,Subscription:oe,ConfigService:_e,ClientRoute:ye},jt="{}";var Ot={json_encode:K,strlen:z,count:Y,implode:Ne,array_search:he,array_splice:ge,is_int:Ct};var Ye=class{method;url;action;wheres;defaults=null;constructor(t,n,o,r=null,i){this.method=t,this.url=n,this.action=o,this.wheres={},this.defaults=r,i&&(this.wheres=i)}where(t,n){return t!==null&&typeof t=="object"?this.wheres=Object.assign(this.where,t):n&&(this.wheres[t]=n),this}};var Ze=class{routes;trimExpr=/^\/|\/$/g;setRoutes(t){this.routes=t}getRoutes(){return this.routes}register(t,n,o,r=null,i){let c=new Ye(t.toLowerCase(),n,o,r,i);return this.routes.push(c),c}get(t,n){return this.register("get",t,n)}resolve(t){t=t.replace(this.trimExpr,"");let n=t.split("/");for(let o in this.routes){let r={},i=!0,c=this.routes[o],a=c.url.replace(this.trimExpr,"").split("/"),l=0,s=!1;for(l;l<a.length;l++){let m=a[l];if(m.indexOf("*")!==-1){let T=m.slice(0,-1);if(!T||n[l].indexOf(T)===0){s=!0;break}}let g=m.indexOf("{")!==-1;if(m!==n[l]&&!g){i=!1;break}if(g){let T=m.split(/[{}]+/),f=T[1];if(f[f.length-1]==="?")f=f.slice(0,-1);else if(l>=n.length){i=!1;break}if(f.indexOf("<")!==-1){let h=/<([^>]+)>/.exec(f);h&&(f=f.replace(/<([^>]+)>/g,""),c.wheres[f]=h[1])}if(c.wheres[f]){let h=new RegExp(c.wheres[f],"g");if(!h.test(n[l])){i=!1;break}h.lastIndex=0,h.test("/")&&(s=!0)}let d=l<n.length?n[l]:null;if(d&&T[0])if(d.indexOf(T[0])!==0){i=!1;break}else d=d.slice(T[0].length);if(r[f]=d,s){r[f]=n.slice(l).join("/");break}}}if(l<n.length&&!s&&(i=!1),i)return{item:c,params:r}}return null}};var $={list:{},config:{},booleanAttributes:{},router:new Ze};var et={},tt={postpone:function(e,t){et[e]=t},ready:function(e){if(!(e in et))throw new Error("There is no postponed action for "+e);et[e](),delete et[e]}};var S={hydrate:!0,rootScope:!1,scopedContainer:{},located:{},iteration:{},lastIteration:{},layout:"",cancel:!1};var ie={};function nt(){return window.viewiScopeState??{http:{},state:{}}}var pt={};function ot(e,t,n){A[e]=t,U[e]=t,pt[e]=n}var gn={},yn=0;function Z(e,t={},n=!1){if(!(e in $.list)){if(n)return null;throw new Error("Can't resolve "+e)}let o=$.list[e],r=null,i=!1;if(o.di==="Singleton"?i=gn:o.di==="Scoped"&&(i=S.scopedContainer),i&&e in i)return i[e];if(o.custom)r=pt[e]();else if(!o.dependencies)r=new U[e];else{let a=[];for(let l in o.dependencies){let s=o.dependencies[l],m=!!s.null;var c=null;t&&s.argName in t?c=t[s.argName]:s.default?c=s.default:s.builtIn?c=s.name==="string"?"":0:c=Z(s.name,{},m),a.push(c)}r=new U[e](...a)}o.base&&(r.__id=++yn+"");let u=nt();if(u.state[e])for(let a in u.state[e])r[a]=u.state[e][a];return i&&(i[e]=r),r}function Ft(e){let t=document.head,n=document.createElement("script");n.type="text/javascript",n.src=e,t.appendChild(n)}function J(e){if(!e.keep){for(let t in e.track){let n=e.track[t];delete e.instance.$$r[n.path][n.id]}if(e.track=[],e.children){for(let t in e.children)J(e.children[t]);e.children={}}if(e.main){for(let n=0;n<e.instance.$$p.length;n++){let o=e.instance.$$p[n];delete o[1].$$r[o[0]]}let t=e.instance;t.destroy&&t.destroy()}e.parent&&(delete e.parent.children[e.id],delete e.parent)}}function qt(e,t){return function(n){t(e,n)}}var rt={_props:!0,$_callbacks:!0,_refs:!0,_slots:!0,_element:!0,$$t:!0,$$r:!0,$:!0,_name:!0,emitEvent:!0};var bn=0;function xn(e,t,n,o){let r=o[n];Array.isArray(r)||r!==null&&typeof r=="object"&&typeof r!="function"&&it(t,e,r),Object.defineProperty(o,n,{enumerable:!0,configurable:!0,get:function(){return r},set:function(i){let c=r!==i;if(r=i,it(t,e,r),c)for(let u in o.$$r){let a=o.$$r[u][0],l=o.$$r[u][1];if(a in l.$$r)for(let s in l.$$r[a]){let m=l.$$r[a][s];m[0].apply(null,m[1])}}}})}function it(e,t,n){if(!(e in rt)&&!Array.isArray(n)){if(n!==null&&typeof n=="object"&&typeof n!="function"){let o=Object.keys(n);for(let i=0;i<o.length;i++){let c=o[i];c in rt||xn(t,e,c,n)}n.$$r||Object.defineProperty(n,"$$r",{enumerable:!1,writable:!0,value:{}});let r=++bn+"";n.$$r[r]=[e,t],t.$$p.push([r,n])}}}function vn(e,t){let n=e[t];it(t,e,n),Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return n},set:function(o){let r=n!==o;if(n=o,it(t,e,n),r&&t in e.$$r)for(let i in e.$$r[t]){let c=e.$$r[t][i];c[0].apply(null,c[1])}}})}function Kt(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let o=t[n];o in rt||vn(e,o)}return e}var Cn=0;function E(e){return e.__aid||(e.__aid=++Cn,ie[e.__aid]={current:-1,target:e,invalid:[],added:0}),ie[e.__aid]}function Jt(e,t){let n=E(e),o=e.childNodes.length,r=n.current+3;r=r>o?o:r;let i=[];for(let u=n.current+1;u<r;u++){let a=e.childNodes[u];if(a.nodeType===8)return n.current=u,n.invalid=n.invalid.concat(i),a;i.push(u)}n.added++,n.invalid=n.invalid.concat(i),console.log("Hydrate comment not found",t);let c=document.createComment(t);return n.current=n.current+i.length+1,o>n.current?e.insertBefore(c,e.childNodes[n.current]):e.appendChild(c)}var kn={body:!0,head:!0,html:!0};function Gt(e,t){let n=E(e),o=e.childNodes.length,r=n.current+3;r=r>o?o:r;let i=[];for(let u=n.current+1;u<r;u++){let a=e.childNodes[u];if(a.nodeType===1&&a.nodeName.toLowerCase()===t.toLowerCase())return n.current=u,n.invalid=n.invalid.concat(i),a;i.push(u)}if(t in kn){let u=document.getElementsByTagName(t);if(u.length>0)return n.invalid=[],u[0]}n.added++,n.invalid=n.invalid.concat(i),console.warn("Hydrate not found",t);let c=document.createElement(t);return n.current=n.current+i.length+1,o>n.current?e.insertBefore(c,e.childNodes[n.current]):e.appendChild(c)}function se(e,t,n,o){let r=[e];o.arguments&&(r=r.concat(o.arguments));let i=(t.expression?e.$$t[t.code].apply(null,r):t.content)??"";n.nodeValue!==i&&(n.nodeValue=i)}function Qt(e,t,n,o){let r=E(e),i=e.childNodes.length,c=r.current+3;c=c>i?i:c;let u=[],a=r.current>-1?r.current:r.current+1;for(let s=a;s<c;s++){let m=e.childNodes[s];if(m.nodeType===3){if(s===r.current)break;return r.current=s,r.invalid=r.invalid.concat(u),se(t,n,m,o),m}s!==r.current&&u.push(s)}r.added++,r.invalid=r.invalid.concat(u);let l=document.createTextNode("");return se(t,n,l,o),r.current=r.current+u.length+1,i>r.current?e.insertBefore(l,e.childNodes[r.current]):e.appendChild(l)}var zt={},Tn="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",Wt=Tn.split(",");for(let e=0;e<Wt.length;e++)zt[Wt[e]]=!0;function Xt(e){return e.toLowerCase()in zt}var dt="http://www.w3.org/1999/xlink";function ce(e,t,n,o,r){let i=null;if(t.children){i="";for(let c=0;c<t.children.length;c++){let u=t.children[c],a=[e];r.arguments&&(a=a.concat(r.arguments));let l=u.expression?e.$$t[u.code].apply(null,a):u.content??"";i=c===0?l:i+(l??"")}}o.toLowerCase()in $.booleanAttributes?i===!0||i===null?o!==n.getAttribute(o)&&n.setAttribute(o,o):n.removeAttribute(o):n.isSvg&&o.startsWith("xlink:")?i!==null?i!==n.getAttribute(o)&&n.setAttributeNS(dt,o,i):n.removeAttributeNS(dt,o.slice(6,o.length)):i!==null?i!==n.getAttribute(o)&&n.setAttribute(o,i):n.removeAttribute(o)}var Yt=0;function st(){return++Yt}function I(e,t=!1,n,o){let r=document.createTextNode("");return r._anchor=o??"#"+ ++Yt,n&&n.current++,t||n&&e.childNodes.length>n.current?(n?e:e.parentElement).insertBefore(r,n?e.childNodes[n.current]:e):e.appendChild(r),r}function Zt(e,t,n,o,r,i,c){let u=[e];c.arguments&&(u=u.concat(c.arguments));let a=e.$$t[n.children[0].forData].apply(null,u),l=Array.isArray(a),s=o,m=!1,b=!1,g={},T={};for(let f in a){let d=l?+f:f,h=a[d],p=++c.counter,v={id:p,why:"forItem",instance:e,arguments:[...c.arguments],map:{...c.map},track:[],parent:c,children:{},counter:0};c.refs&&(v.refs=c.refs),c.children[p]=v;let N=b;b=!1;for(let x in r)if(r[x]===h){b=!0,m=!1,s=o;break}else N&&!(d in g)&&(s=r[x].begin,m=!0);if(g[d]=!0,!b){v.map[n.children[0].forKey]=v.arguments.length,v.arguments.push(d),v.map[n.children[0].forItem]=v.arguments.length,v.arguments.push(h);let x={map:{...i.map},storage:{...i.storage}},k=I(s,!0,void 0,"b"+st());M(s,e,[t],v,x,!1,!0);let w=I(s,!0,void 0,k._anchor);d in r&&(T[d]=r[d]),r[d]={key:d,value:h,begin:k,end:w,scope:v}}}for(let f in r)if(!(f in g)){let d=r[f].end;for(;d.previousSibling._anchor!==d._anchor;)d.previousSibling.remove();r[f].begin.remove(),d.remove(),J(r[f].scope),delete r[f]}for(let f in T){let d=T[f].end;for(;d.previousSibling._anchor!==d._anchor;)d.previousSibling.remove();T[f].begin.remove(),J(T[f].scope),d.remove()}}function ct(e,t,n,o,r,i,c){let u=!0;for(let s=0;s<c;s++)u=u&&!r.values[s];o.children&&(u=u&&!!e.$$t[o.children[0].code](e));let a=n.anchorNode,l={map:{...i.map},storage:{...i.storage}};if(r.values[c]!==u){let s=n.scope.parent;if(r.values[c]=u,u){let m=++s.counter,b={id:m,why:c===0?"if":o.children?"elseif":"else",instance:e,arguments:[...s.arguments],map:{...s.map},track:[],parent:s,children:{},counter:0};s.refs&&(b.refs=s.refs),n.scope=b,s.children[m]=b,M(a,e,[t],b,l,!1,!0)}else for(J(n.scope),n.scope={id:-1,why:"if",instance:e,arguments:[],map:{},track:[],parent:s,children:{},counter:0};a.previousSibling._anchor!==a._anchor;)a.previousSibling.remove()}}function en(e,t,n){let o=t.expression?e.$$t[t.code](e):t.content??"";n.nodeValue!==o&&(n.nodeValue=o)}var _n=0;function R(e,t,n,o){e.$$r[t]||(e.$$r[t]={});let r=++_n;n.track.push({id:r,path:t}),e.$$r[t][r]=o}function G(e){let t="value";switch(e.t){case"t":{t="tag";break}case"a":{t="attr";break}case void 0:case"v":{t="value";break}case"c":{t="component";break}case"x":{t="text";break}case"m":{t="comment";break}case"d":{t="doctype";break}case"r":{t="root",e.h&&e.h[0].t==="x"&&e.h[0].c?.substring(0,9)==="<!DOCTYPE"&&(e.h[0].t="d");break}default:throw new Error("Type "+e.t+" is not defined in build")}if(e.type=t,delete e.t,e.c&&(e.content=e.c,delete e.c),e.e&&(e.expression=e.e,delete e.e),e.a){e.attributes=e.a,delete e.a;for(let n in e.attributes)G(e.attributes[n])}if(e.i){e.directives=e.i,delete e.i;for(let n in e.directives)G(e.directives[n])}if(e.h){e.children=e.h,delete e.h;for(let n in e.children)G(e.children[n])}}function ut(e){return e in $.list}function tn(e,t,n){let o=t.expression?e.$$t[t.code](e):t.content??"",r=t.type==="component"||t.expression&&ut(o),i=n.anchorNode,c=n.scope.parent;for(J(n.scope);i.previousSibling._anchor!==i._anchor;)i.previousSibling.remove();let u=++c.counter,a={id:u,why:"dynamic",arguments:[...c.arguments],map:{...c.map},track:[],instance:e,parent:c,children:{},counter:0};if(c.refs&&(a.refs=c.refs),n.scope=a,c.children[u]=a,r){let l={};if(t.slots){let m={id:++a.counter,why:"slot",arguments:[...c.arguments],map:{...c.map},track:[],instance:e,parent:a,children:{},counter:0,slots:c.slots};for(let b in t.slots)l[b]={node:t.slots[b],scope:m}}ue(i,o,{attributes:t.attributes,scope:c,instance:e},l,!1,!0);return}else{let l=i.parentElement.insertBefore(document.createElement(o),i);if(t.attributes)for(let s in t.attributes){let m=t.attributes[s],b=m.expression?e.$$t[m.code](e):m.content??"";if(b[0]==="("){let g=b.substring(1,b.length-1);if(m.children){let T=e.$$t[m.dynamic?m.dynamic.code:m.children[0].code](e);l.addEventListener(g,T)}}else{ce(e,m,l,b,a);let g=[];if(m.children)for(let T in m.children){let f=m.children[T];f.subs&&(g=g.concat(f.subs))}if(g)for(let T in g){let f=g[T];R(e,f,a,[ce,[e,m,l,b,a]])}}}t.children&&M(l,e,t.children,a,void 0,!1,!1)}}function nn(e,t,n,o){for(;o.previousSibling._anchor!==o._anchor;)o.previousSibling.remove();let r=o.parentElement,i=document.createElement(r.nodeName),c=[e];n.arguments&&(c=c.concat(n.arguments));let u=(t.expression?e.$$t[t.code].apply(null,c):t.content)??"";i.innerHTML=u;let a=Array.prototype.slice.call(i.childNodes);for(let l=0;l<a.length;l++){let s=a[l];r.insertBefore(s,o)}}function on(e,t){return function(n){if(t.inputType==="checkbox"){let o=t.getter(e),r=n.target.value;if(Array.isArray(o)){let i=o.slice(),c=i.indexOf(r);c===-1?n.target.checked&&i.push(r):n.target.checked||i.splice(c,1),t.setter(e,i)}else t.setter(e,n.target.checked)}else if(t.inputType==="radio"){let o=n.target.value;t.setter(e,o)}else if(t.isMultiple||n.target.multiple){let o=n.target.options,r=[];for(let i=0;i<o.length;i++){let c=o[i];c.selected&&r.push(c.value)}t.setter(e,r)}else t.setter(e,n.target.value)}}function ht(e,t,n){if(n.inputType==="checkbox"){let o=n.getter(t);if(Array.isArray(o)){let r=e.value;o.indexOf(r)===-1?(e.removeAttribute("checked"),e.checked=!1):(e.setAttribute("checked","checked"),e.checked=!0)}else o?(e.setAttribute("checked","checked"),e.checked=!0):(e.removeAttribute("checked"),e.checked=!1)}else if(n.inputType==="radio"){let o=n.getter(t),r=e.value;o===r?(e.setAttribute("checked","checked"),e.checked=!0):(e.removeAttribute("checked"),e.checked=!1)}else if(n.isMultiple||e.multiple){let o=e.options,r=n.getter(t);for(let i=0;i<o.length;i++){let c=o[i];r.indexOf(c.value)===-1?c.selected=!1:c.selected=!0}}else e.value=n.getter(t)}var gt="http://www.w3.org/2000/svg";function rn(e,t,n){if(e.childNodes.length>0){let o=[],r=Array.prototype.slice.call(e.childNodes);for(let i=0;i<r.length;i++){let c=r[i],u=c.nodeType;if(u===3){let a=n.childNodes[t.current];a&&a.nodeType===u?a.nodeValue=c.nodeValue:(t.added++,n.childNodes.length>t.current&&o.push(t.current),n.childNodes.length>t.current+1?n.insertBefore(c,n.childNodes[t.current+1]):n.appendChild(c),t.current++)}else{let a=n.childNodes[t.current];if(!a||a.nodeType!==u||u===1&&a.nodeName!==c.nodeName)t.added++,n.childNodes.length>t.current&&o.push(t.current),n.childNodes.length>t.current+1?n.insertBefore(c,n.childNodes[t.current+1]):n.appendChild(c),t.current++;else if(u===1&&(a.nodeName!==c.nodeName||a.outerHTML!==c.outerHTML)){let l=a.getAttribute("data-keep");(!l||l!==c.getAttribute("data-keep"))&&(a.outerHTML=c.outerHTML)}}t.current++}o.length>0&&(t.invalid=t.invalid.concat(o))}}function M(e,t,n,o,r,i=!0,c=!1){let u=null,a=!1;for(let l=0;l<n.length;l++){let s=n[l],m=e,b=!1,g=!1,T=o;switch(s.type){case"tag":case"component":{if(s.directives){let x=r||{map:{},storage:{}},k=[t];o.arguments&&(k=k.concat(o.arguments));for(let w=0;w<s.directives.length;w++){let C=s.directives[w];if(!(w in x.map)){switch(x.map[w]=!0,C.content){case"if":{u={values:[],index:0,subs:[]};let _=!!t.$$t[C.children[0].code].apply(null,k);u.values.push(_);let P=i?E(e):void 0,j=I(e,c,P),W={map:{...x.map},storage:{...x.storage}},V=++o.counter,H={id:V,why:"if",arguments:o.arguments,map:o.map,instance:t,track:[],parent:o,children:{},counter:0};o.refs&&(H.refs=o.refs),o.children[V]=H,_&&M(e,t,[s],H,x,i,c);let F=I(e,c,P,j._anchor);if(C.children[0].subs)for(let B in C.children[0].subs){let O=C.children[0].subs[B];u.subs.push(O),R(t,O,o,[ct,[t,s,{scope:H,anchorNode:F},C,u,W,u.index]])}u.index++,b=!0;break}case"else-if":{if(u){let _=!0;for(let B=0;B<u.index;B++)_=_&&!u.values[B];_=_&&!u.values[u.index-1]&&!!t.$$t[C.children[0].code].apply(null,k),u.values.push(_);let P=i?E(e):void 0,j=I(e,c,P),W={map:{...x.map},storage:{...x.storage}},V=++o.counter,H={id:V,why:"elseif",instance:t,arguments:o.arguments,map:o.map,track:[],parent:o,children:{},counter:0};o.refs&&(H.refs=o.refs),o.children[V]=H,_&&M(e,t,[s],H,x,i,c);let F=I(e,c,P,j._anchor);C.children[0].subs&&(u.subs=u.subs.concat(C.children[0].subs));for(let B in u.subs){let O=u.subs[B];R(t,O,o,[ct,[t,s,{scope:H,anchorNode:F},C,u,W,u.index]])}u.index++,b=!0}else console.warn("Directive else-if has missing previous if/else-if",C.content,C);break}case"else":{if(u){let _=!0;for(let B=0;B<u.index;B++)_=_&&!u.values[B];u.values.push(_);let P=i?E(e):void 0,j=I(e,c,P),W={map:{...x.map},storage:{...x.storage}},V=++o.counter,H={id:V,why:"else",instance:t,arguments:o.arguments,map:o.map,track:[],parent:o,children:{},counter:0};o.refs&&(H.refs=o.refs),o.children[V]=H,_&&M(e,t,[s],H,x,i,c);let F=I(e,c,P,j._anchor);for(let B in u.subs){let O=u.subs[B];R(t,O,o,[ct,[t,s,{scope:H,anchorNode:F},C,u,W,u.index]])}u.index++,b=!0}else console.warn("Directive else has missing previous if/else-if",C.content,C);break}case"foreach":{let _=t.$$t[C.children[0].forData].apply(null,k),P=i?E(e):void 0,j=I(e,c,P),W=Array.isArray(_),V={};for(let F in _){let B=W?+F:F,O=_[B],xt=++o.counter,q={id:xt,why:"foreach",instance:t,arguments:[...o.arguments],map:{...o.map},track:[],parent:o,children:{},counter:0};o.refs&&(q.refs=o.refs),o.children[xt]=q,q.map[C.children[0].forKey]=q.arguments.length,q.arguments.push(B),q.map[C.children[0].forItem]=q.arguments.length,q.arguments.push(O);let dn={map:{...x.map},storage:{...x.storage}},vt=I(e,c,P,"b"+st());M(e,t,[s],q,dn,i,c);let hn=I(e,c,P,vt._anchor);V[B]={key:B,value:O,begin:vt,end:hn,scope:q}}let H=I(e,c,P,j._anchor);if(C.children[0].subs)for(let F in C.children[0].subs){let B=C.children[0].subs[F],O={map:{...x.map},storage:{...x.storage}};R(t,B,o,[Zt,[t,s,C,H,V,O,o]])}b=!0;break}default:{console.warn("Directive not implemented",C.content,C),b=!0;break}}if(b)break}}if(b)continue}let f=s.expression?t.$$t[s.code](t):s.content??"",d=s.expression,h=s.type==="component"||s.expression&&ut(f),p,v,N=o;if(d&&(p=i?E(e):void 0,v=I(e,c,p)),d){let x=++o.counter;N={id:x,why:"dynamic",arguments:[...o.arguments],map:{...o.map},track:[],instance:t,parent:o,children:{},counter:0},o.refs&&(N.refs=o.refs),o.children[x]=N,T=N}if(h){let x={};if(s.slots){let k=++N.counter,w={id:k,why:"slot",arguments:[...o.arguments],map:{...o.map},track:[],parent:N,instance:t,children:{},counter:0,slots:o.slots};o.refs&&(w.refs=o.refs),N.children[k]=w;for(let C in s.slots)x[C]={node:s.slots[C],scope:w}}ue(e,f,{attributes:s.attributes,scope:o},x,i,c)}else{if(s.content==="template"){a=c;break}if(s.content==="slot"){p||(p=i?E(e):void 0),a=c;let k="default";if(s.attributes)for(let _ in s.attributes)s.attributes[_].content==="name"&&(k=s.attributes[_].children[0].content);let w=I(e,c,p);if(k in o.slots){let _=o.slots[k];_.node.unpacked||(G(_.node),_.node.unpacked=!0),M(m,_.scope.instance,_.node.children,_.scope,void 0,i,a)}else s.children&&M(m,t,s.children,o,void 0,i,a);let C=I(e,c,p,w._anchor);o.instance._name in S.iteration&&(S.iteration[o.instance._name].slots[k]=C);continue}g=!0;let x=Xt(f)||e.isSvg;m=i?Gt(e,f):c?e.parentElement.insertBefore(x?document.createElementNS(gt,f):document.createElement(f),e):e.appendChild(x?document.createElementNS(gt,f):document.createElement(f)),s.first&&(t._element=m),x&&(m.isSvg=!0)}if(d){let x=I(e,c,p,v._anchor);if(s.subs)for(let k in s.subs){let w=s.subs[k];R(t,w,o,[tn,[t,s,{scope:N,anchorNode:x}]])}}if(h)continue;break}case"text":{if(s.raw){let d=c?e.parentElement:e,h=document.createElement(d.nodeName),p=[t];o.arguments&&(p=p.concat(o.arguments));let v=(s.expression?t.$$t[s.code].apply(null,p):s.content)??"";h.innerHTML=v;let N=i?E(e):void 0,x=I(e,c,N);if(i)N.current++,rn(h,N,e);else if(h.childNodes.length>0){let w=Array.prototype.slice.call(h.childNodes);for(let C=0;C<w.length;C++){let _=w[C];c?e.parentElement.insertBefore(_,e):e.appendChild(_)}}let k=I(e,c,N,x._anchor);if(s.subs)for(let w in s.subs){let C=s.subs[w];R(t,C,o,[nn,[t,s,o,k]])}break}let f;if(i?f=Qt(e,t,s,o):(f=document.createTextNode(""),se(t,s,f,o),c?e.parentElement.insertBefore(f,e):e.appendChild(f)),s.subs)for(let d in s.subs){let h=s.subs[d];R(t,h,o,[se,[t,s,f,o]])}break}case"comment":{let f=s.expression?t.$$t[s.code](t):s.content??"",d=i?Jt(e,f):c?e.parentElement.insertBefore(document.createComment(f),e):e.appendChild(document.createComment(f));if(s.subs)for(let h in s.subs){let p=s.subs[h];R(t,p,o,[en,[t,s,d]])}break}case"doctype":{if(i){let f=E(e);f.current++}break}default:{console.warn("Node type not implemented",s);break}}if(g){if(s.attributes){let f=i?m.getAttributeNames():null,d=i?{}:null;for(let h=0;h<s.attributes.length;h++){let p=s.attributes[h],v=p.expression?t.$$t[p.code](t):p.content??"";if(v[0]==="#"){let x=v.substring(1,v.length);t._refs[x]=m,o.refs&&x in o.refs&&(t[x]=m);continue}let N=v==="model";if(v[0]==="("){let x=v.substring(1,v.length-1);if(p.children){let k=t.$$t[p.dynamic?p.dynamic.code:p.children[0].code](t);m.addEventListener(x,k)}}else if(N){let x="text";m.getAttribute("type")==="checkbox"&&(x="checkbox"),m.getAttribute("type")==="radio"&&(x="radio");let k=!1;m.tagName==="SELECT"&&(x="select",k=m.multiple);let w=x==="checkbox"||x==="radio"||x==="select",C=p.children[0],_=t.$$t[C.code](t),P=w?"change":"input",j={getter:_[0],setter:_[1],inputType:x,isMultiple:k};ht(m,t,j);for(let W in C.subs){let V=C.subs[W];R(t,V,o,[ht,[m,t,j]])}m.addEventListener(P,on(t,j))}else{i&&(d[v]=!0),ce(t,p,m,v,o);let x=[];if(p.children)for(let k in p.children){let w=p.children[k];w.subs&&(x=x.concat(w.subs))}if(x)for(let k in x){let w=x[k];R(t,w,o,[ce,[t,p,m,v,o]])}}}if(i)for(let h=0;h<f.length;h++)f[h]in d||m.removeAttribute(f[h])}else if(i){let f=m.getAttributeNames();for(let d=0;d<f.length;d++)m.removeAttribute(f[d])}}s.children&&M(m,t,s.children,T,void 0,i,a)}}function sn(e,t,n,o){e[t]=n(o)}function cn(e,t,n){let o=n.scope.instance,r=t.expression?o.$$t[t.code](o):t.content??"";if(r[0]!=="("){let i=null,c=[];if(t.children)for(let u=0;u<t.children.length;u++){let a=t.children[u],l=[o];n.scope.arguments&&(l=l.concat(n.scope.arguments));let s=a.expression?o.$$t[a.code].apply(null,l):a.content??"";i=u===0?s:i+(s??""),a.subs&&(c=c.concat(a.subs))}if(r==="_props"&&i)for(let u in i)e[u]=i[u],e._props[u]=i[u];else e[r]=i,e._props[r]=i}}function ue(e,t,n,o,r=!1,i=!1,c={}){if(!(t in $.list))throw new Error(`Component ${t} not found.`);if(!(t in U))throw new Error(`Component ${t} not found.`);let u=$.list[t],a=u.nodes,l=S.lastIteration,s=t in l;if(s){let f=l[t].slots;for(let d in f){let h=f[d];for(;h.previousSibling._anchor!==h._anchor;)h.previousSibling.remove()}l[t].scope.keep=!0}let m=s?l[t].instance:Kt(Z(t,c));s||u.hooks&&u.hooks.init&&m.init();let b=t+"_x";!s&&b in U&&(m.$$t=U[b]);let g=n?++n.scope.counter:0,T=s?l[t].scope:{id:g,why:t,arguments:n?[...n.scope.arguments]:[],instance:m,main:!0,map:n?{...n.scope.map}:{},track:[],children:{},counter:0,parent:n?n.scope:void 0,slots:o};if(n&&(n.scope.children[g]=T),u.refs&&(T.refs=u.refs),n&&n.attributes){let f=n.scope.instance;for(let d in n.attributes){let h=n.attributes[d],p=h.expression?f.$$t[h.code](f):h.content??"";if(p[0]==="("){let v=p.substring(1,p.length-1);if(h.children){let N=f.$$t[h.dynamic?h.dynamic.code:h.children[0].code](f);m.$_callbacks[v]=N}}else{let v=p==="model",N=null,x=[];if(v){let k=h.children[0],w=[f];n.scope.arguments&&(w=w.concat(n.scope.arguments));let C=f.$$t[k.code].apply(null,w);N=C[0](f),m.$_callbacks[p]=qt(f,C[1]);for(let _ in k.subs){let P=k.subs[_];R(f,P,n.scope,[sn,[m,p,C[0],f]])}}else if(h.children)for(let k=0;k<h.children.length;k++){let w=h.children[k],C=[f];n.scope.arguments&&(C=C.concat(n.scope.arguments));let _=w.expression?f.$$t[w.code].apply(null,C):w.content??"";N=k===0?_:N+(_??""),w.subs&&(x=x.concat(w.subs))}else N=!0;if(p==="_props"&&N)for(let k in N)m[k]=N[k],m._props[k]=N[k];else h.children?.length===1&&h.children[0].content==="false"&&(N=!1),m[p]=N,m._props[p]=N;if(x)for(let k in x){let w=x[k];R(f,w,n.scope,[cn,[m,h,n]])}}}}if(!S.cancel&&u.hooks&&u.hooks.mounted&&m.mounted(),t in S.located&&(S.iteration[t]={instance:m,scope:T,slots:{}}),s){let f=l[t].slots;for(let h in f){let p=f[h];if(p.parentNode&&document.body.contains(p)){if(o&&h in o){let v=o[h];v.node.unpacked||(G(v.node),v.node.unpacked=!0),M(p,v.scope.instance,v.node.children,v.scope,void 0,!1,!0)}S.iteration[t].slots[h]=p}}let d=t;for(;d;){let h=$.list[d];d=!1;let p=h.nodes;if(p){let v=p.children;v&&v[0].type==="component"&&v[0].content in l&&(S.iteration[v[0].content]=l[v[0].content],d=v[0].content)}}return T}if(u.renderer&&m.render(e,t,T,n,r,i,c),e&&a){a.unpacked||(G(a),a.unpacked=!0);let f=a.children;f&&(f[0].type==="component"&&(S.located[f[0].content]=!0),f[0].first=!0,M(e,m,f,T,void 0,r,i))}return T}var un={};function at(e,t,n,o,r){if(S.cancel=!1,!(e in $.list))throw new Error(`Component ${e} not found.`);let i=$.list[e];if(i.lazy&&!(i.lazy in un)){let a="viewi"+(L.name==="default"?"":"."+L.name),l=L.publicPath+a+"."+i.lazy+(L.minify?".min":"")+".js"+(L.appendVersion?"?"+L.build:"");Ft(l),tt.postpone(i.lazy,function(){un[i.lazy]=!0,at(e,t,n,o,r)});return}let c=S.hydrate,u=S.rootScope;if(o&&u&&i.parent!==S.layout){location.href=o.href;return}if(i.middleware&&!r){let a=i.middleware.length,l=!0,s=-1,m={next:function(b=!0){l=b,s++,l&&s<a?Z(i.middleware[s]).run(m):l&&at(e,t,n,o,!0)}};m.next(!0);return}o&&o.func(o.href,o.forward),S.layout=i.parent,S.lastIteration=S.iteration,S.iteration={},S.scopedContainer={},S.located={},S.rootScope=ue(n??document,e,void 0,{},c,!1,t),S.hydrate=!1;for(let a in S.lastIteration)a in S.iteration||(S.lastIteration[a].scope.keep=!1);if(u&&J(u),c)for(let a in ie){let l=ie[a];for(let s=l.target.childNodes.length-1;s>=l.current+1;s--)l.target.childNodes[s].remove();for(let s=l.invalid.length-1;s>=0;s--)l.target.childNodes[l.invalid[s]].remove()}}var Nn=document.createElement("a"),Q={link:Nn,scrollTo:null};var Sn=function(e){return Q.link.href=e,Q.link.pathname},yt={},An=function(e,t=!0){t&&window.history.pushState({href:e},"",e),window.scrollTo(0,0),yt.callback?.()};function X(e,t=!0){S.cancel=!0;let n=Sn(e),o=$.router.resolve(n);if(o==null)throw"Can't resolve route for uri: "+n;setTimeout(function(){at(o.item.action,o.params,void 0,{func:An,href:e,forward:t})},0)}var ae=class{browser=!0;server=!1;constructor(){}getConfig(){return $.config}redirect(t){X(t)}navigateBack(){history.back()}getCurrentUrl(){return location.pathname+location.search}getCurrentUrlPath(){return location.pathname}getQueryParams(){return Object.fromEntries(new URLSearchParams(location.search))}onUrlUpdate(t){yt.callback=t}};var lt=class{onSuccess;onError=null;onAlways=null;result=null;lastError=null;action;constructor(t){this.action=t}error(t){this.onError=t}success(t){this.onSuccess=t}always(t){this.onAlways=t}run(){let t=this;this.action(function(n,o){t.result=n;let r=!1;if(o?(t.lastError=o,t.onError!==null?t.onError(o):r=!0):t.onSuccess(t.result),t.onAlways!=null&&t.onAlways(),r)throw t.lastError})}then(t,n,o){this.onSuccess=t,n&&(this.onError=n),o&&(this.onAlways=o),this.run()}};function an(e){return"Blob"in window&&e instanceof Blob}var ee=class e{url;status;statusText;headers={};body=null;constructor(t,n,o,r={},i=null){this.url=t,this.status=n,this.statusText=o,this.headers=r,this.body=i}withUrl(t){var n=this.clone();return n.url=t,n}withStatus(t,n=null){var o=this.clone();return o.status=t,n!==null&&(o.statusText=n),o}withHeaders(t){var n=this.clone();return n.headers={...n.headers,...t},n}withHeader(t,n){var o=this.clone();return o.headers[t]=n,o}withBody(t=null){var n=this.clone();return n.body=t,n}ok(){return this.status>=200&&this.status<300}clone(){var t=new e(this.url,this.status,this.statusText,this.headers,this.body);return t}};function ln(e,t,n,o,r){let i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===4){let u=i.status,a=i.getResponseHeader("Content-Type"),l=a&&a.indexOf("application/json")===0,m=i.responseText;l&&(m=JSON.parse(i.responseText));let b={},g=i.getAllResponseHeaders();if(g){let f=g.trim().split(/[\r\n]+/);for(let d=0;d<f.length;d++){let p=f[d].split(": "),v=p.shift();if(v){let N=p.join(": ");b[v]=N}}}let T=new ee(n,u,"",b,m);e(T)}};let c=o!==null&&typeof o=="object"&&!an(o);if(i.open(t.toUpperCase(),n,!0),c&&i.setRequestHeader("Content-Type","application/json"),r)for(let u in r)if(Array.isArray(r[u]))for(let a=0;a<r[u].length;a++)i.setRequestHeader(u,r[u][a]);else i.setRequestHeader(u,r[u]);o!==null?i.send(c?JSON.stringify(o):o):i.send()}var mt=class e{url;method;headers={};body=null;isExternal;constructor(t,n,o={},r=null){this.url=t,this.method=n,this.headers=o,this.body=r}withMethod(t){var n=this.clone();return n.method=t,n}withUrl(t){var n=this.clone();return n.url=t,n}withHeaders(t){var n=this.clone();return n.headers={...n.headers,...t},n}withHeader(t,n){var o=this.clone();return o.headers[t]=n,o}withBody(t=null){var n=this.clone();return n.body=t,n}clone(){var t=new e(this.url,this.method,this.headers,this.body);return t}markAsExternal(){return this}};var bt=function(e,t,n){let r=n.length,i=function(a,l){l&&a.status>=200&&a.status<300?t(a.body):t(void 0,a.body?a.body:"Failed")},c=function(a,l){l&&r>-1?n[r].response(a,u):i(a,l)},u={next:function(a){r--,c(a,!0)},reject:function(a){r--,c(a,!1)}};u.next(e)},le=class e{interceptors=[];request(t,n,o,r){let i=this;return new lt(function(u){try{let a=nt(),l=new mt(n,t,r,o),s=-1,m=i.interceptors.length,b=[],g=function(d,h){if(h){let p=d.method+"_"+d.url+"_"+JSON.stringify(d.body);if(p in a.http){let v=JSON.parse(a.http[p]);delete a.http[p];let N=new ee(d.url,200,"OK",{},v);bt(N,u,b);return}else ln(function(v){bt(v,u,b)},d.method,d.url,d.body,d.headers)}else{let p=new ee(d.url,0,"Rejected",{},null);bt(p,u,b)}},T=function(d,h){if(!h){g(d,h);return}if(s<m){let p=Z(i.interceptors[s]);b.push(p),p.request(d,f)}else g(d,h)},f={next:function(d){s++,T(d,!0)},reject:function(d){s++,T(d,!1)}};f.next(l)}catch(a){console.error(a),u(void 0,a)}})}get(t,n){return this.request("get",t,null,n)}post(t,n,o){return this.request("post",t,n,o)}withInterceptor(t){let n=new e;return n.interceptors=[...this.interceptors,t],n}};var D={};function ft(e,t,n=!1,o=!1){let r=document.getElementById("portal_"+e.to+"_end");if(r){let i=D[e.to].current,c=o?r:r.parentElement,u=n?E(c):void 0,a=n?u.current:0,l=Array.prototype.indexOf.call(c.childNodes,r);n&&(u.current=i);let s="default",m=I(c,o,u);if(s in t.slots){let g=t.slots[s];g.node.unpacked||(G(g.node),g.node.unpacked=!0),M(c,g.scope.instance,g.node.children,g.scope,void 0,n,o)}let b=I(c,o,u,m._anchor);if(t.instance._name in S.iteration&&(S.iteration[t.instance._name].slots[s]=b),e.anchorNode=b,n){D[e.to].current=u.current;let g=Array.prototype.indexOf.call(c.childNodes,r);u.current=a+g-l}}}var me=class extends y{to;name;_name="Portal";anchorNode;destroy(){if(this.to&&this.anchorNode&&this.anchorNode.previousSibling){for(;this.anchorNode.previousSibling._anchor!==this.anchorNode._anchor;)this.anchorNode.previousSibling.remove();this.anchorNode.previousSibling.remove(),this.anchorNode.remove()}}render(t,n,o,r,i=!1,c=!1,u={}){if(this.name){let a="portal_"+this.name+"_end";if(i){let l=document.getElementById(a);if(l){let s=Array.prototype.indexOf.call(t.childNodes,l);if(s>0){let m=E(t);if(this.name in D||(D[this.name]={}),D[this.name].current=m.current+1,m.current=s,D[this.name].queue){let b=D[this.name].queue;for(let g=0;g<b.length;g++)b[g][0].apply(null,b[g][1]);delete D[this.name].queue}}}}else{let l="portal_"+this.name,s=document.createElement("i"),m=document.createElement("i");s.setAttribute("id",l),m.setAttribute("id",a);let b="display: none !important;";s.setAttribute("style",b),m.setAttribute("style",b),c?t.parentElement.insertBefore(s,t):t.appendChild(s),c?t.parentElement.insertBefore(m,t):t.appendChild(m)}}else if(this.to)if(i)if(this.to in D&&D[this.to].current)ft(this,o,i,c);else{let a=[ft,[this,o,i,c]];this.to in D?D[this.to].queue.push(a):D[this.to]={queue:[a]}}else ft(this,o,!1,!0);else throw new Error("Portal component should have either 'name' or 'to' attribute.")}};function mn(){A.BaseComponent=y,ot("HttpClient",le,()=>new le),ot("Platform",ae,()=>new ae),ot("Portal",me,()=>new me)}function fn(){document.addEventListener("click",function(e){if(e.defaultPrevented)return;e.target||console.warn('Can not aquire event target at "watchLinks".');let n=e.target;for(;n.parentElement&&n.tagName!=="A";)n=n.parentElement;n.tagName==="A"&&n.href&&n.href.indexOf(location.origin)===0&&(Q.scrollTo=null,(!Q.link.hash||Q.link.pathname!==location.pathname)&&(e.preventDefault(),Q.link.hash&&(Q.scrollTo=Q.link.hash),X(n.href,!0)))},!1),window.addEventListener("popstate",function(e){e.state?X(e.state.href,!1):X(location.href,!1)})}var pn={register:{},version:L.version,build:L.build,name:L.name,publish(e,t){for(let n in t)if(!(n in U)){let o=t[n];o._t==="template"?$.list[o.name]=JSON.parse(o.data):U[n]=o}tt.ready(e)}};window.ViewiApp=window.ViewiApp||{};window.ViewiApp[L.name]=pn;(async()=>{let e=JSON.parse(jt);L.combine||(e=await(await fetch(L.componentsPath)).json()),$.list=e,$.router.setRoutes(e._routes),$.config=e._config;let t=e._meta.boolean.split(",");for(let n=0;n<t.length;n++)$.booleanAttributes[t[n]]=!0;mn(),pn.register={...U,...A,...Ot},fn(),X(location.href)})();})();
